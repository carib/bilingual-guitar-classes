<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Tuner - GTR Stepbridge</title>
    <meta name="description" content="Digital guitar tuner with tuning instructions and string frequency guide. Learn how to tune your guitar properly with step-by-step instructions.">
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h2>GTR Stepbridge</h2>
                <span class="nav-subtitle">Bilingual Guitar Instruction</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link" data-lang-en="Home" data-lang-es="Inicio">Home</a>
                </li>
                <li class="nav-item">
                    <a href="program.html" class="nav-link" data-lang-en="Program" data-lang-es="Programa">Program</a>
                </li>
                <li class="nav-item">
                    <a href="about.html" class="nav-link" data-lang-en="About" data-lang-es="Acerca de">About</a>
                </li>
                <li class="nav-item">
                    <a href="tuner.html" class="nav-link active" data-lang-en="Tuner" data-lang-es="Afinador">Tuner</a>
                </li>
                <li class="nav-item">
                    <a href="contact.html" class="nav-link" data-lang-en="Contact" data-lang-es="Contacto">Contact</a>
                </li>
            </ul>
            <div class="language-toggle">
                <button class="lang-btn" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="es">ES</button>
            </div>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1 data-lang-en="The Digital Tuner" data-lang-es="El Afinador Digital">The Digital Tuner</h1>
        </div>
    </section>

    <!-- Tuner Instructions -->
    <section class="tuner-instructions">
        <div class="container">
            <div class="instructions-content">
                <div class="instructions-text">
                    <h3 data-lang-en="Tuning Instructions" data-lang-es="Instrucciones de Afinación">Tuning Instructions</h3>
                    <div class="instruction-steps">
                        <div class="step">
                            <span class="step-number">1</span>
                            <p><strong data-lang-en="Tune one string at a time." data-lang-es="Afinar una cuerda a la vez.">Tune one string at a time.</strong></p>
                        </div>
                        <div class="step">
                            <span class="step-number">2</span>
                            <p><strong data-lang-en="BE SURE TO GRAB THE CORRECT TUNING PEG!" data-lang-es="¡ASEGÚRATE DE AGARRAR LA CLAVE DE AFINACIÓN CORRECTA!">BE SURE TO GRAB THE CORRECT TUNING PEG!</strong></p>
                        </div>
                        <div class="step">
                            <span class="step-number">3</span>
                            <p><strong data-lang-en="Play the string repeatedly with your thumb." data-lang-es="Toca la cuerda repetidamente con tu pulgar.">Play the string repeatedly with your thumb.</strong></p>
                        </div>
                        <div class="step">
                            <span class="step-number">4</span>
                            <p><strong data-lang-en="Look for the correct STRING NAME to appear on tuner display." data-lang-es="Busca que aparezca el NOMBRE DE CUERDA correcto en la pantalla del afinador.">Look for the correct <span class="highlight" data-lang-en="STRING NAME" data-lang-es="NOMBRE DE CUERDA">STRING NAME</span> to appear on tuner display.</strong></p>
                        </div>
                        <div class="step">
                            <span class="step-number">5</span>
                            <p><strong data-lang-en="Each STRING NAME is followed by an OCTAVE NUMBER." data-lang-es="Cada NOMBRE DE CUERDA es seguido por un NÚMERO DE OCTAVA.">Each STRING NAME is followed by an <span class="highlight" data-lang-en="OCTAVE NUMBER" data-lang-es="NÚMERO DE OCTAVA">OCTAVE NUMBER</span>.</strong></p>
                            <p class="example" data-lang-en="EXAMPLE: The Low E (string 6) has a small number 2 next to it." data-lang-es="EJEMPLO: El Mi grave (cuerda 6) tiene un pequeño número 2 al lado.">EXAMPLE: The Low E (string 6) has a small number 2 next to it.</p>
                        </div>
                        <div class="step">
                            <span class="step-number">6</span>
                            <p><strong data-lang-en="TURN TUNING PEG UP or DOWN to the correct Hz number for that STRING." data-lang-es="GIRA LA CLAVE DE AFINACIÓN ARRIBA o ABAJO al número Hz correcto para esa CUERDA.">TURN TUNING PEG <span class="highlight" data-lang-en="UP" data-lang-es="ARRIBA">UP</span> or <span class="highlight" data-lang-en="DOWN" data-lang-es="ABAJO">DOWN</span> to the correct <span class="highlight">Hz</span> number for that STRING.</strong></p>
                        </div>
                        <div class="step">
                            <span class="step-number">7</span>
                            <p><strong data-lang-en="Get the Hz as close as you can and go to the next string until you have tuned each string." data-lang-es="Obtén el Hz lo más cerca que puedas y ve a la siguiente cuerda hasta que hayas afinado cada cuerda.">Get the Hz as close as you can and go to the next string until you have tuned each string.</strong></p>
                        </div>
                        <div class="step">
                            <span class="step-number">8</span>
                            <p><strong><span class="highlight" data-lang-en="DO IT AGAIN!" data-lang-es="¡HAZLO DE NUEVO!">DO IT AGAIN!</span></strong></p>
                        </div>
                    </div>
                </div>
                <div class="tuner-interface">
                    <div class="tuner-display">
                        <div class="tuner-circle">
                            <div class="tuner-center">
                                <h2>6/E<span class="octave">2</span></h2>
                                <h3>= 82 Hz</h3>
                            </div>
                        </div>
                        <div class="tuner-controls">
                            <button class="tuner-btn" onclick="playString('E2', 82)">6/E2</button>
                            <button class="tuner-btn" onclick="playString('A2', 110)">5/A2</button>
                            <button class="tuner-btn" onclick="playString('D3', 147)">4/D3</button>
                            <button class="tuner-btn" onclick="playString('G3', 196)">3/G3</button>
                            <button class="tuner-btn" onclick="playString('B3', 247)">2/B3</button>
                            <button class="tuner-btn" onclick="playString('E4', 330)">1/E4</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Tuner Diagram Explanation -->
    <section class="tuner-diagram-section">
        <div class="container">
            <div class="tuner-diagram-wrapper">
                <!-- Left side string frequencies -->
                <div class="tuner-diagram-list left">
                    <div>6/E<sub>2</sub> = 82 Hz</div>
                    <div>5/A<sub>2</sub> = 110 Hz</div>
                    <div>4/D<sub>3</sub> = 147 Hz</div>
                </div>
                
                <!-- Center tuner display -->
                <div class="tuner-diagram-center">
                    <!-- Main tuner interface -->
                    <div class="tuner-interface-box">
                        <div class="tuner-screen">
                            <!-- Semi-circular dial with needle -->
                            <div class="tuner-dial">
                                <div class="dial-arc"></div>
                                <div class="dial-needle"></div>
                            </div>
                            
                            <!-- Note display -->
                            <div class="note-display">
                                <span class="note-option">D<sub>2</sub></span>
                                <span class="note-current">E<sub>2</sub></span>
                                <span class="note-option">F<sub>2</sub></span>
                            </div>
                            
                            <!-- Frequency display -->
                            <div class="frequency-display">82.3 Hz</div>
                        </div>
                    </div>
                    
                    <!-- Connection line from tuner to explanation -->
                    <div class="connection-line"></div>
                    
                    <!-- Explanation circle -->
                    <div class="explanation-circle">
                        <div class="explanation-content">
                            <div class="explanation-note">E<sub>2</sub></div>
                            <div class="explanation-frequency">82.3 Hz</div>
                        </div>
                        
                        <!-- Precision lines with labels -->
                        <div class="precision-lines">
                            <div class="precision-line-left">
                                <div class="line"></div>
                                <div class="label" data-lang-en="STRING NAME" data-lang-es="NOMBRE DE CUERDA">STRING NAME</div>
                            </div>
                            <div class="precision-line-right-top">
                                <div class="line"></div>
                                <div class="label" data-lang-en="OCTAVE NUMBER" data-lang-es="NÚMERO DE OCTAVA">OCTAVE NUMBER</div>
                            </div>
                            <div class="precision-line-right-bottom">
                                <div class="line"></div>
                                <div class="label">Hz</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Right side string frequencies -->
                <div class="tuner-diagram-list right">
                    <div>3/G<sub>2</sub> = 196 Hz</div>
                    <div>2/B<sub>3</sub> = 247 Hz</div>
                    <div>1/E<sub>4</sub> = 330 Hz</div>
                </div>
            </div>
        </div>
    </section>

    <!-- String Frequency Guide -->
    <section class="frequency-guide">
        <div class="container">
            <h2 data-lang-en="String Frequency Guide" data-lang-es="Guía de Frecuencias de Cuerdas">String Frequency Guide</h2>
            <div class="frequency-table">
                <div class="table-header">
                    <div class="header-cell" data-lang-en="String" data-lang-es="Cuerda">String</div>
                    <div class="header-cell" data-lang-en="Note" data-lang-es="Nota">Note</div>
                    <div class="header-cell" data-lang-en="Octave" data-lang-es="Octava">Octave</div>
                    <div class="header-cell" data-lang-en="Frequency (Hz)" data-lang-es="Frecuencia (Hz)">Frequency (Hz)</div>
                </div>
                <div class="table-row">
                    <div class="table-cell" data-lang-en="6th String" data-lang-es="6ta Cuerda">6th String</div>
                    <div class="table-cell">E</div>
                    <div class="table-cell">2</div>
                    <div class="table-cell">82 Hz</div>
                </div>
                <div class="table-row">
                    <div class="table-cell" data-lang-en="5th String" data-lang-es="5ta Cuerda">5th String</div>
                    <div class="table-cell">A</div>
                    <div class="table-cell">2</div>
                    <div class="table-cell">110 Hz</div>
                </div>
                <div class="table-row">
                    <div class="table-cell" data-lang-en="4th String" data-lang-es="4ta Cuerda">4th String</div>
                    <div class="table-cell">D</div>
                    <div class="table-cell">3</div>
                    <div class="table-cell">147 Hz</div>
                </div>
                <div class="table-row">
                    <div class="table-cell" data-lang-en="3rd String" data-lang-es="3ra Cuerda">3rd String</div>
                    <div class="table-cell">G</div>
                    <div class="table-cell">3</div>
                    <div class="table-cell">196 Hz</div>
                </div>
                <div class="table-row">
                    <div class="table-cell" data-lang-en="2nd String" data-lang-es="2da Cuerda">2nd String</div>
                    <div class="table-cell">B</div>
                    <div class="table-cell">3</div>
                    <div class="table-cell">247 Hz</div>
                </div>
                <div class="table-row">
                    <div class="table-cell" data-lang-en="1st String" data-lang-es="1ra Cuerda">1st String</div>
                    <div class="table-cell">E</div>
                    <div class="table-cell">4</div>
                    <div class="table-cell">330 Hz</div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Guitar Tuner -->
    <section class="tuner-section">
        <div class="container">
            <h2 data-lang-en="Guitar Tuner" data-lang-es="Afinador de Guitarra">Guitar Tuner</h2>
            <div class="tuner-start-section">
                <button id="startTuningBtn" class="btn btn-primary start-tuning-btn" data-lang-en="Start Tuning!" data-lang-es="¡Comenzar Afinación!">
                    Start Tuning!
                </button>
                <p class="tuner-instruction" data-lang-en="Click the button above to start the tuner and allow microphone access." data-lang-es="Haz clic en el botón de arriba para comenzar el afinador y permitir el acceso al micrófono.">
                    Click the button above to start the tuner and allow microphone access.
                </p>
            </div>
            <div class="tuner-interface" id="tunerInterface" style="display: none;">
                <canvas class="frequency-bars"></canvas>
                <div class="meter">
                    <div class="meter-dot"></div>
                    <div class="meter-pointer"></div>
                </div>
                <div class="notes">
                    <div class="notes-list"></div>
                    <div class="frequency">
                        <span>Hz</span>
                    </div>
                </div>
                <div class="a4">A<sub>4</sub> = <span>440</span> Hz</div>
                <label class="auto">
                    Auto
                    <input type="checkbox" checked />
                </label>
            </div>
        </div>
    </section>


    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>GTR Stepbridge</h3>
                    <p data-lang-en="Bilingual guitar instruction for elementary school students." data-lang-es="Instrucción bilingüe de guitarra para estudiantes de primaria.">Bilingual guitar instruction for elementary school students.</p>
                </div>
                <div class="footer-section">
                    <h4 data-lang-en="Quick Links" data-lang-es="Enlaces Rápidos">Quick Links</h4>
                    <ul>
                        <li><a href="index.html" data-lang-en="Home" data-lang-es="Inicio">Home</a></li>
                        <li><a href="program.html" data-lang-en="Program" data-lang-es="Programa">Program</a></li>
                        <li><a href="about.html" data-lang-en="About" data-lang-es="Acerca de">About</a></li>
                        <li><a href="tuner.html" data-lang-en="Tuner" data-lang-es="Afinador">Tuner</a></li>
                        <li><a href="contact.html" data-lang-en="Contact" data-lang-es="Contacto">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4 data-lang-en="Program Features" data-lang-es="Características del Programa">Program Features</h4>
                    <ul>
                        <li data-lang-en="Bilingual Instruction" data-lang-es="Instrucción Bilingüe">Bilingual Instruction</li>
                        <li data-lang-en="Weekly Classes" data-lang-es="Clases Semanales">Weekly Classes</li>
                        <li data-lang-en="Tablature Learning" data-lang-es="Aprendizaje de Tablatura">Tablature Learning</li>
                        <li data-lang-en="Performance Concerts" data-lang-es="Conciertos de Interpretación">Performance Concerts</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4 data-lang-en="Follow Us" data-lang-es="Síguenos">Follow Us</h4>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p data-lang-en="&copy; 2024 GTR Stepbridge. All rights reserved." data-lang-es="&copy; 2024 GTR Stepbridge. Todos los derechos reservados.">&copy; 2024 GTR Stepbridge. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/scripts.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <script src="https://cdn.jsdelivr.net/npm/aubiojs@0.1.1/build/aubio.min.js"></script>
    <script src="js/advanced-tuner.js"></script>
    <script>
        // Audio context for playing notes
        let audioContext;
        
        // Initialize audio context on first user interaction
        function initAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }
        
        // Play a note at the specified frequency
        function playString(note, frequency) {
            initAudioContext();
            
            // Resume audio context if suspended
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
            
            // Create oscillator
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            // Connect nodes
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            // Set frequency and wave type
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            oscillator.type = 'sine';
            
            // Set volume envelope (fade in/out)
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.1);
            gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + 1.5);
            
            // Play the note
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 1.5);
            
            // Update tuner display
            updateTunerDisplay(note, frequency);
        }
        
        // Update tuner display
        function updateTunerDisplay(note, frequency) {
            const tunerCenter = document.querySelector('.tuner-center');
            const octave = note.slice(-1);
            const noteName = note.slice(0, -1);
            const stringNumber = getStringNumber(note);
            
            tunerCenter.innerHTML = `
                <h2>${stringNumber}/${noteName}<span class="octave">${octave}</span></h2>
                <h3>= ${frequency} Hz</h3>
            `;
        }
        
        // Get string number from note
        function getStringNumber(note) {
            const stringMap = {
                'E2': '6',
                'A2': '5', 
                'D3': '4',
                'G3': '3',
                'B3': '2',
                'E4': '1'
            };
            return stringMap[note] || '6';
        }
        
        // Update tuner display when buttons are clicked (fallback)
        document.querySelectorAll('.tuner-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const text = this.textContent;
                const [string, note] = text.split('/');
                const octave = note.slice(-1);
                const noteName = note.slice(0, -1);
                const fullNote = noteName + octave;
                const frequency = getFrequency(fullNote);
                
                // Play the note
                playString(fullNote, frequency);
            });
        });
        
        function getFrequency(note) {
            const frequencies = {
                'E2': 82,
                'A2': 110,
                'D3': 147,
                'G3': 196,
                'B3': 247,
                'E4': 330
            };
            return frequencies[note] || 82;
        }

    </script>
</body>
</html> 